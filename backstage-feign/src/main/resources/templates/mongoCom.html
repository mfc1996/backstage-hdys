<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<script src="../js/jquery.min.js"></script>
<script src="../js/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script>
<link type="text/css" rel="stylesheet" href="../js/bootstrap3/css/bootstrap.css"></link>
<link type="text/css" rel="stylesheet" href="../js/bootstrap-table/bootstrap-table.css"></link>
<link type="text/css" rel="stylesheet" href="../js/bootstrap-datetimepicker/css/bootstrap-datetimepicker.css"></link>
<link type="text/css" rel="stylesheet" href="../js/bootstrap-fileinput/css/fileinput.css"></link>

<script src="../js/bootstrap3/js/bootstrap.js"></script>
<script src="../js/bootstrap-bootbox/bootbox.js"></script>
<script src="../js/bootstrap-table/bootstrap-table.js"></script>
<script src="../js/bootstrap-table/locale/bootstrap-table-zh-CN.js"></script>
<script src="../js/bootstrap-datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js"></script>
<script src="../js/bootstrap-fileinput/js/fileinput.js"></script>
<script src="../js/bootstrap-fileinput/js/locales/zh.js"></script>
<body>
<button onclick="openCom()" type="button" class="btn btn-primary glyphicon glyphicon-plus">新增</button>
<table class="table" id="mongodTable"></table>
</div>
</body>
<script type="text/javascript"  >
$(function(){
    $("#mongodTable").bootstrapTable({
        url: '../mongodList',
        pagination: true,
        pageList: [1, 2, 10, 20, 50],
        pageNumber: 1,
        pageSize: 2,
        sidePagination: 'server',//分页方式：client客户端分页，server服务端分页
        striped: true,//条纹表格
        queryParams: function () {
            return {
                page: this.pageNumber,
                rows: this.pageSize,
            }
        },
        columns:[
            [
                {field:'234',checkbox:true},
                {field:'typeId',title:'产品号'},
                {field:'typeName',title:'产品名称'},
                {field:'commentInfo',title:'评论内容'},
                {field:'commentTime',title:'评论时间'}
            ]
        ]

    })
})
//打开新增弹框
function openCom(){
    bootbox.dialog({
        title:'新增',
        message: createAddContent("../page/addcom"),
        closeButton: true,
        buttons : {
            "success" : {
                "label" : "<i class='icon-ok'></i> 保存",
                "className" : "btn-sm btn-success",
                "callback" : function() {
                    var typeId = $("#typeId").val();
                    var typeName = $("#typeName").val();
                    var commentInfo = $("#commentInfo").val();
                    var commentTime = $("#commentTime").val();
                    $.ajax({
                        url:'../saveMongod',
                        type:'post',
                        contentType: "application/json",
                        data:JSON.stringify({
                            'typeId': typeId,
                            'typeName': typeName,
                            'commentInfo': commentInfo,
                            'commentTime': commentTime
                        }),
                        dataType:'json',
                        success:function(data){
                            bootbox.alert({
                                size: "small",
                                title: "提示",
                                message: "新增成功成功!",
                                callback: function () {
                                    $('#mongodTable').bootstrapTable('refresh');
                                }
                            })

                        }
                    });
                }
            },
            "cancel" : {
                "label" : "<i class='icon-info'></i> 取消",
                "className" : "btn-sm btn-danger",
                "callback" : function() {

                }
            }
        }
    });
}

function searchPro(){
    $("#proTable").bootstrapTable('refresh');
}

$('.date').datetimepicker({
    language: 'zh-CN',//显示中文
    format: 'yyyy-mm-dd',//显示格式
    minView: "month",//设置只显示到月份
    initialDate: new Date(),//初始化当前日期
    autoclose: true,//选中自动关闭
    todayBtn: true//显示今日按钮
});

var res;
function createAddContent(url){
    $.ajax({
        url:url,
        async:false,
        success:function(data){
            res = data;
        }
    });
    return res;
}
</script>
</html>